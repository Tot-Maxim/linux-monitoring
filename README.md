# linux-monitoring

_Здесь будут задачи по Linux, мониторингу и автоматизации_

**Чатом GPT это задание не прогоняем! Иначе не пройдем собеседование на Linux!** 

1. Взять за рабочую директорию ../home/name_user/Documents/ и склонировать в нее учебный репозиторий по выданной ссылке (подсказка: git clone)
2. Найти и скачать архив .tar.gz дистрибутива Prometheus для Linux самой последней второй (не третьей) версии в склонированную директорию ../home/name_user/Documents/monitoring_linux/prometheus/, то есть в директорию prometheus (подсказка GitHub, AMD64, bin)
2. Разархивировать архив и найти внутри директории бинарь Prometheus
3. Проверить версию Prometheus (./prometheus --version) и запустить бинарь "на коленке" (подсказка ./bin/prometheus или ./prometheus)
4. Проверить запущенный Прометей (Прометеус) на веб-морде (подсказка: проверка в браузере на порту :9090, чтобы понять по какому ip адресу стучаться в Прометеус, нужно знать ip адрес интерфейса своей тачки)
5. После успешной проверки создать рядом с бинарём prometheus пустой файл prometheus.yml - далее наполнить этот файл дефолтным конфигом (подсказка: GitHub - prometheus/documentation/examples/prometheus.yml)
6. Далее написать Unit файл для Prometheus и положить его рядом с бинарем prometheus (подсказка: логически понять как назвать Unit файл и как он должен быть написан)
7. Далее выдать права 777 на директорию prometheus и на все файлы внутри, в которой уже должны лежать три файла: бинарь, конфиг и юнит (обычно такие права 777 не выдаются, но у нас учебный проект, имеем это ввиду (одновременно идем в ИИ GPT Qwen и учимся выставлять числовые права))
8. Далее создать группу пользователей prometheus и добавить туда пользователя prometheus, далее проверить группу пользователей, что prometheus добавился
9. Затем рекурсивно изменить владельца (пользователя) для директории prometheus и всех файлов внутри (это те же самые файлы: бинарь, конфиг и юнит)
10. Затем скопировать Unit в директорию systemd автозапуска Linux с уже выставленными правами и пользователем
11. Далее запускаем сервис Prometheus утилитой systemctl, проверяем статус ACTIVE и смотрим на веб-морду, а если INACTIVE, то идем переписывать Unit либо смотрим конфиг YAML в Prometheus, скорее всего ошиблись в одном из двух (если конфиг YAML дефолтный, то дело не в нём), а также читаем логи (следующий пункт темы), чтобы понять почему INACTIVE
9. Затем выводим логи Prometheus в терминал (параллельно с помощью Qwen читаем что такое stdin, stdout, stderr), которые отбрасывает запущенный Prometheus с помощью утилиты journalctl
10. Далее парсим логи утилитой grep в файл logs.log по ключевому слову info с верхним и нижним регистром, то есть конечный результат лога должен содержать только строки с info (подсказка: journalctl | grep - используем перенаправление вывода из journalctl в grep)
10. Далее написать Bash скрипт (подсказка: не забыть выдать числовые права исполнения на скрипт), начиная с пункта 2 текущей темы до старта сервиса Prometheus. Этот скрипт в финале должен поднять Prometheus с нуля (придумать в скрипте свои директории, к примеру test_prometheus (а-ля свой проект) и сложить Prometheus туда)
11. Прогнать готовый скрипт (не забыть удалить юнит из автозапуска и стопнуть поднятый Prometheus, который уже поднимали)
