**Pushgateway**  

#### Что это:
Pushgateway — это промежуточный сервис, который используется для сбора метрик от задач с коротким сроком жизни (например, cron-задач или batch-процессов). В отличие от стандартного подхода Prometheus (pull-модель), Pushgateway позволяет "толкать" (push) метрики в него, после чего Prometheus будет их забирать.

#### Когда использовать:
Pushgateway полезен в следующих случаях:
- Задачи с коротким сроком жизни (например, cron-задачи), которые завершаются до того, как Prometheus успевает собрать метрики.
- Сервисы, которые не могут постоянно работать для поддержания HTTP-эндпоинта для сбора метрик.
    
#### Как работает:
1. Процесс отправляет метрики в Pushgateway через HTTP-запрос.
2. Pushgateway хранит эти метрики до тех пор, пока Prometheus не выполнит pull-запрос для их сбора.
3. Prometheus собирает метрики из Pushgateway, как если бы это был обычный endpoint.

#### Архитектурные особенности:
- Pushgateway не хранит метрики долгосрочно — он только временно хранит их для последующего сбора Prometheus.
- Поддерживает метки (`labels`) для различения метрик от разных источников.
- Можно использовать для нескольких job и instance.

#### Практическое применение:
- Мониторинг результатов ежедневных бэкапов.
- Отслеживание состояния batch-процессов (например, импорта данных).
- Сбор метрик от скриптов деплоя.

#### Ограничения:
- Не предназначен для хранения долгосрочных метрик.
- Может стать точкой отказа, если сам Pushgateway недоступен.
- Требует дополнительного мониторинга состояния Pushgateway.

---

### Сравнение и взаимодействие

| Компонент         | Основная задача                              | Применение                                  |
|-------------------|----------------------------------------------|--------------------------------------------|
| **Service Discovery** | Автоматическое обнаружение целей           | Динамические инфраструктуры (Kubernetes, AWS) |
| **Alertmanager**   | Управление алертами                          | Отправка уведомлений о проблемах            |
| **Pushgateway**    | Сбор метрик от временных процессов          | Мониторинг cron-задач и batch-процессов     |

#### Взаимодействие:
- Service Discovery помогает Prometheus находить цели для сбора метрик.
- Prometheus собирает метрики с этих целей и отправляет алерты в Alertmanager.
- Pushgateway используется для сбора метрик от процессов, которые невозможно мониторить напрямую через pull-модель.
